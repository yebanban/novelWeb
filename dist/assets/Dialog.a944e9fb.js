import{d as w,r as h,E as b,D as E,G as k,o as y,y as g,p as a,a as _,m as c,l as m,h as i,t as B}from"./index.7669b82f.js";const L={class:"dialog-footer"},D=m("\u53D6\u6D88"),$=m(" \u786E\u5B9A "),U=w({props:{modelValue:{type:Boolean},title:null,placeholder:null},emits:["update:modelValue","clickEnter"],setup(e,{emit:o}){const t=h(""),l=()=>{o("clickEnter",t.value),o("update:modelValue",!1),t.value=""},r=n=>{if(console.log(n),!/^\s*$/.test(t.value)){var n=n||window.event,u=n.code;(u=="NumpadEnter"||u=="Enter")&&(l(),window.removeEventListener("keydown",r))}},d=()=>{window.addEventListener("keydown",r)},f=()=>{t.value="",window.removeEventListener("keydown",r),o("update:modelValue",!1)};return(s,n)=>{const u=b,p=E,V=k;return y(),g(V,{modelValue:e.modelValue,"onUpdate:modelValue":n[1]||(n[1]=v=>o("update:modelValue",v)),"destroy-on-close":"",onOpen:d,"before-close":f,title:e.title,width:"50%",draggable:""},{footer:a(()=>[_("span",L,[c(p,{onClick:f},{default:a(()=>[D]),_:1}),c(p,{type:"primary",disabled:!!/^\s*$/.test(t.value),onClick:l},{default:a(()=>[$]),_:1},8,["disabled"])])]),default:a(()=>[c(u,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=v=>t.value=v),placeholder:e.placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])}}});function x(e){return i.request({url:"newBook",method:"post",data:e})}function C(){return i.request({url:"getbooks"})}function T(e){return i.request({url:`getChapters?id=${e.id}`})}function A(e){return i.request({url:"updateBookName",method:"post",data:e})}function N(e){return i.request({url:"deleteBook",method:"post",data:e})}var X={create:x,getAllBook:C,getChapters:T,updateBookName:A,deleteBook:N};const O=e=>e.replace(/^\s*(.+?)\s*$/,"$1"),Y=e=>{e=O(e);let o=e.split(/[\s\n]+/),t=0;for(let l of o)l=l.replace(/[\x00-\xff]+/g,"m"),t+=l.length;return t},G=e=>{let o=/(?<=第)\d+(?=章)/.exec(e);return o?+o[0]:-1},R=()=>({scrollY:document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,scrollX:document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft}),W=(e,o)=>{let t=!1;return function(...r){t||(t=!0,setTimeout(()=>{t=!1},o),e.apply(r))}},j=(e,o)=>{let t=null;return{fnDebounced:function(...l){t&&clearTimeout(t),t=setTimeout(()=>{e.apply(this,l)},o)},clearTime:function(){t&&clearTimeout(t)}}},q={class:"dialog-footer"},F=m("\u53D6\u6D88"),I=m("\u786E\u5B9A"),z=w({props:{modelValue:{type:Boolean},tips:null},emits:["update:modelValue","clickEnter"],setup(e,{emit:o}){const t=()=>{o("clickEnter"),o("update:modelValue",!1)},l=s=>{console.log(1);var s=s||window.event,n=s.code;(n=="NumpadEnter"||n=="Enter")&&(t(),d())},r=()=>{window.addEventListener("keydown",l)},d=()=>{o("update:modelValue",!1),window.removeEventListener("keydown",l)};return(f,s)=>{const n=E,u=k;return y(),g(u,{modelValue:e.modelValue,"destroy-on-close":"",onOpen:r,"before-close":d,"onUpdate:modelValue":s[0]||(s[0]=p=>o("update:modelValue",p)),title:"\u63D0\u793A",width:"50%",draggable:""},{footer:a(()=>[_("span",q,[c(n,{onClick:d},{default:a(()=>[F]),_:1}),c(n,{type:"primary",onClick:t},{default:a(()=>[I]),_:1})])]),default:a(()=>[_("span",null,B(e.tips),1)]),_:1},8,["modelValue"])}}});export{z as _,U as a,X as b,Y as c,j as d,R as e,G as g,O as r,W as t};
